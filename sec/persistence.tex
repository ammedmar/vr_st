% !TEX root = ../vr_st.tex

\section{Persistence and Vietoris--Rips filtrations}

In this section we provide an overview of the key concepts in the theory of persistence and its applications to metric geometry.

\subsection{$\R$-diagrams and interleaving distance}

\subsubsection{}

We think of the set of real numbers $\R$ as a category via its poset structure.

For any category $\cC$, the category $\cC^\R$ of \defn{$\R$-diagrams in $\cC$} consists of functors from $\R$ to $\cC$ and natural transformations between them.

For any $\R$-diagram $F$, we denote the image of $r \in \R$ by $F_r$ and the image of a morphism $s \leq t$ by $F_{s,t}$.

\subsubsection{}\label{ss:interleaving}

Let $\delta$ be a fixed non-negative real number.
For any $\R$-diagram $F \colon \R \to \cC$, we write $F^\delta$ for the $\R$-diagram defined by
\[
F^\delta_r = F_{r+\delta}
\quad\text{and}\quad
F^\delta_{s \leq t} = F_{s+\delta \leq t+\delta}.
\]

A \defn{$\delta$-interleaving} of two $\R$-diagrams $F,G \colon \R \to \cC$ is a pair of natural transformations
$\phi \colon F \to G^\delta$ and $\psi \colon G \to F^\delta$ such that for any $r \in \R$ the morphism $\psi_{r+\delta} \circ \phi_r$ and $\phi_{r+\delta} \circ \psi_r$ are respectively equal to $F_{r,r+2\delta}$ and $G_{r,r+2\delta}$.

The \defn{interleaving distance} between them is defined by
\[
\di(F, G) = \inf\set{\delta \geq 0 \mid F \text{ and } G \text{ are } \delta\text{-interleaved}}.
\]

Functorially changing the target category $\cC$ does not increase the interleaving distance.

\proposition (\cite[p.~1508]{bubenik2015metrics})
For any functor $\Phi \colon \cC \to \cD$ we have
\[
\di(\Phi \circ F, \Phi \circ G) \leq \di(F, G)
\]
for any pair of functors $F, G \colon \R \to \cC$.

\medskip\noindent
This is because the $\delta$-interleaving functors of $F$ and $G$ compose with $\Phi$ to produce a $\delta$-interleaving of $\Phi \circ F$ and $\Phi \circ G$.

\subsection{$\R$-spaces and homotopy interleaving distance}

\subsubsection{}\label{ss:R-spaces}

Let $\Top$ be the category of topological spaces and continuous maps.
We refer to $\Top^\R$ as the category of \defn{$\R$-spaces}.
An $\R$-space $X$ for which each $X_r$ is a CW-complex is said to be \defn{cellular}.
We say that a morphism $f \colon X \to Y$ in $\Top^\R$ is a \defn{weak equivalence} if $f_r \colon X_r \to Y_r$ is a weak homotopy equivalence for each $r \in \R$.

Two $\R$-spaces $X$ and $Y$ are \defn{weakly equivalent}, denoted by $X \simeq Y$, if there are weak equivalences $X \leftarrow W \rightarrow Y$ for some $\R$-space $W$.\footnote{
For a convenient model of $\Top$, this is equivalent to asking the $\R$-spaces $X$ and $Y$ to be isomorphic in the localization of $\Top^\R$ with respect to weak equivalences \cite{blumberg2023interleaving}.}

\subsubsection{}\label{def:dhi}

Two $\R$-spaces $X$ and $Y$ are said to be \defn{$\delta$-homotopy-interleaved} for some $\delta \geq 0$, if there exist $\R$-spaces $X' \simeq X$ and $Y' \simeq Y$ such that $X'$ and $Y'$ are $\delta$-interleaved.

Following \cite{blumberg2023interleaving}, the \defn{homotopy interleaving distance} between two $\R$-spaces $X$ and $Y$ is given by
\[
\dhi(X,Y) = \inf \set{\delta \geq 0 \mid X,Y \text{ are }\delta\text{-homotopy-interleaved}}.
\]

\subsection{Persistence modules and bottleneck distance}

\subsubsection{}

Let $\Vec$ be the category of vector spaces and linear maps over a fixed field $\k$.
The category $\Vec^\R$ is referred to as that of \defn{persistence modules}.

We denote, with slight abuse of notation, by $\kk$ and $0$ the functors that assign $\kk$ and $0$, respectively, to every object of $\R$ and the identity map to each morphism.

\subsubsection{}

Let $I$ be an interval in $\R$.
The persistence module $\kk[I]$, referred to as an \defn{interval module}, is defined explicitly by
\[
\kk[I]_t =
\begin{cases}
	\kk & \text{if } t \in I, \\
	\hfil 0 & \text{otherwise},
\end{cases}
\qquad \qquad
\kk[I]_{s, t} =
\begin{cases}
	\id & \text{if } s, t \in I, \\
	\hfil 0 & \text{otherwise}.
\end{cases}
\]

A persistence module $V$ is said to be \defn{interval decomposable} if there is a multiset of intervals $(I_\lambda)_{\lambda \in \Lambda}$ such that $V$ is isomorphic to $\bigoplus_{\lambda \in \Lambda} \kk[I_\lambda]$.
In this case we refer to the multiset as the \defn{barcode} of $V$ and denote it $\barc V$.
By Azumayaâ€™s theorem \cite{azumaya1950theorem}, $\barc V$ is unique up to reordering.

\subsubsection{}

Crawley-Boevey's result \cite{Crawley-Boevey.2015} is a widely-used existence theorem for barcode decompositions.
It ensures that any persistence module \(V\) with \(V_t\) being a finite dimensional vector space for every \(t \in \R\) has a barcode decomposition.
However, this condition is often too restrictive.

A more general condition is q-tameness.
For a detailed presentation of the approach we summarize below, consult \cite{Chazal.2016a, Chazal.2016b}.
A persistence module \(V\) is \defn{q-tame} if the rank of the map \(V_{s,t} \colon V_s \to V_t\) is finite for all \(s < t\).
For instance, the infinite product of interval modules \(\prod_{n \in \N_{> 0}} C([0,1/n))\) demonstrates that not all q-tame persistence modules can have a barcode decomposition in the traditional sense.
A persistence module \(V\) is termed \defn{ephemeral} if all the maps \(V_{s,t} \colon V_s \to V_t\) are zero for \(s < t\).
The \defn{radical} \(\rad V\) of a persistence module \(V\) is defined as the unique minimal submodule of \(V\) such that the cokernel of the inclusion \(\rad V \hookrightarrow V\) is an ephemeral persistence module.
Specifically, \((\rad V)_t = \sum_{s<t} \img V_{s,t}\).
For example, the radical of the infinite product \(\prod_{n \in \N_{> 0}} C([0, 1/n))\) is the direct sum \(\bigoplus_{n \in \N_{> 0}} C((0,1/n))\).
If \(V\) is q-tame its radical has a barcode decomposition, which describes the isomorphism type of \(V\) ``up to ephemerals".\footnote{
This idea is formalized using the so-called \textit{observable category}, which is equivalent to the quotient of the category of persistence modules by the subcategory of ephemeral persistence modules.
The barcode of the radical of a q-tame persistence module \(V\) serves as a complete invariant of \(V\) in the observable category.}
We define the barcode of a q-tame persistent module as the barcode of its radical.

\subsubsection{}
\label{ss:algebraic_stability}
Let $A$ and $A'$ be two possibly empty multisets of points in $\R^2$ lying above the diagonal.
A subset $P \subset A \times A'$ is said to be a \defn{partial matching} between $A$ and $A'$ if every point $(a, b) \in A$ is matched with at most one point of $A'$ and every point $(a', b') \in A'$ is matched with at most one point of $A$.

The \defn{bottleneck distance} between $A$ and $A'$ is defined as
\[
d_B(A, A') = \
\inf \set[\big]{\mathrm{cost}(P) \mid P \subset A \times A' \text{ is a partial matching}}
\]
where $\mathrm{cost}(P)$ is the largest between
\[
\sup \set[\Big]{\max\set{|a - a'|, |b - b'|} \bigm| (a, b) \in A, (a', b') \in A' \text{ are matched in }P}
\]
and
\[
\sup \set[\Big]{\tfrac{ |a - b|}{2} \bigm| (a, b) \in A \cup A' \text{ are unmatched}}.
\]

\proposition (\cite[Thm.~5.14]{Chazal.2016a})
The interleaving distance of q-tame persistence modules agrees with the bottleneck distance of its barcodes.

\subsubsection{}

For any integer $k \geq 0$, applying the degree $k$ homology functor (with coefficients in~$\kk$) to an $\R$-space produces its \defn{persistent $k$-homology}, a persistence module denoted $\rH_k(X; \kk)$.
We will also consider the reduced version of this construction.

It is also convenient to consider functors from $\R^\op$ to $\Vec$, which, by abuse of terminology, we also refer to as persistence modules.
The most important example of these is the \defn{persistent $k$-cohomology} $\rH^k(X; \kk)$ of an $\R$-space $X$.

For simplicity, we often omit the coefficient field $\kk$ when the results do not depend on the choice of coefficient fields.

An $\R$-space is said to be \defn{q-tame} if its persistent homology and cohomology are both q-tame as persistence modules for any degree and field of coefficients.

\subsection{Vietoris--Rips filtrations and stability}

\subsubsection{}

Given a metric space $\cX$ and $r > 0$, let $\VR_r(\cX)$ denote the geometric realization of the simplicial complex whose vertices are the points of $\cX$ and whose simplices are the finite subsets of $\cX$ with diameter strictly less than $r$.
If $s \leq t$ then $\VR_s(\cX)$ is a subset of $\VR_t(\cX)$.
So, together with the inclusion maps, these spaces define an $\R$-space with $\VR_r(\cX) = \emptyset$ for non-positive values of $r$.
We refer to it as the \defn{Vietoris--Rips filtration} of $\cX$.
For any \(m \in \N\) we denote the persistence module \(\rH_m\big(\VR(\cX)\big)\) by \(\rH_m^{\VR}(\cX)\).

\subsubsection{}\label{sss:q-tameness}

Recall that a metric space is said to be \defn{totally bounded} if, for every $\epsilon > 0$, there exists a finite set of points such that the entire space can be covered by the union of $\epsilon$-balls centered at these points.

\proposition (\cite[Prop.~5.1]{chazal2014geometric})
If $\cX$ is a totally bounded metric space, then $\VR(\cX)$ is $q$-tame.

\subsubsection{}

For notational simplicity, when referring to intervals (or bars) in a barcode of $\VR(\cX)$, we will use the notation $(a, b)$ to denote the left-open, right-closed interval $(a, b]$.
This should not cause confusion due to the following.

\proposition (\cite[Thm.~5.2]{lim2024vietoris})
If $\cX$ is compact, the barcode of the persistent homology of $\VR(\cX)$ consists of only intervals that are left-open and right-closed.

\subsubsection{}\label{thm:stability-HI}

The \defn{Gromov--Hausdorff distance} $\dgh(\cX, \cY)$ between two compact metric spaces $\cX$ and $\cY$ is defined as
\[
\dgh(\cX, \cY) = \inf_{\cZ, \varphi, \psi} \set[\Big]{d_\rH\big(\varphi(\cX), \psi(\cY)\big)},
\]
where the infimum is taken over all metric spaces $\cZ$ and isometric embeddings $\varphi \colon \cX \to \cZ$ and $\psi \colon \cY \to \cZ$, and $d_\rH$ denotes the Hausdorff distance.

\proposition (\cite[Thm.~1.9 \& 1.10]{blumberg2023interleaving})
Let $\cX$ and $\cY$ be two metric spaces.
Then, for any $k \in \N,$
\[
\di\big(\rH_k^\VR(\cX), \rH_k^\VR(\cY)\big) \leq
\dhi\big(\VR(\cX), \VR(\cY)\big) \leq
2 \cdot \dgh(\cX, \cY).
\]